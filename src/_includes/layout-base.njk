<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>{{ title }}</title>
  <meta name="description" content="{{ description }}" />
  <link rel="canonical" href="{{ canonical }}" />

  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <main class="container">
    {% include "nav.njk" %}
    {{ content | safe }}
    {% include "footer.njk" %}
  </main>
  <script>
  (function () {
    const drops = Array.from(document.querySelectorAll("details.navdrop"));
    if (!drops.length) return;

    function closeAll(except) {
      for (const d of drops) {
        if (d !== except) d.removeAttribute("open");
      }
    }

    // When one opens, close the rest
    for (const d of drops) {
      d.addEventListener("toggle", () => {
        if (d.open) closeAll(d);
      });
    }

    // Close on Escape
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeAll(null);
      }
    });

    // Click outside closes
    document.addEventListener("click", (e) => {
      const clickedInside = drops.some((d) => d.contains(e.target));
      if (!clickedInside) closeAll(null);
    });
  })();
</script>
</body>
</html>
